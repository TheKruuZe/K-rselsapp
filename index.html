<!DOCTYPE html>
<html lang="da">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="theme-color" content="#0d0d0d" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Kørselsrapport" />
    <title>Kørselsrapport</title>
    <link rel="manifest" href="manifest.json" />
    <style>
      :root {
        --bg:#0d0d0d;
        --surface:#1a1a1a;
        --border:#333;
        --text:#f4f4f4;
        --muted:#9b9b9b;
        --blue:#3b82f6;
        --green:#22c55e;
        --red:#ef4444;
      }
      body {
        margin:0;
        background:var(--bg);
        color:var(--text);
        font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      }
      header {
        text-align:center;
        padding:28px 0 12px;
        font-size:1.4rem;
        font-weight:600;
        color:var(--blue);
      }
      main { padding:0 18px 90px; }
      .field { display:flex; flex-direction:column; margin-bottom:22px; }
      label { font-size:1rem; color:var(--muted); margin-bottom:8px; }
      input, select {
        -webkit-appearance:none;
        font-size:18px;
        height:56px;
        padding:0 15px;
        border-radius:14px;
        border:1px solid var(--border);
        background:var(--surface);
        color:var(--text);
      }
      button {
        width:100%;
        border:none;
        border-radius:14px;
        font-size:18px;
        font-weight:600;
        color:#fff;
        padding:17px;
        margin-top:16px;
      }
      #btn { background:var(--blue); }
      #finishBtn { background:var(--green); }
      #resetBtn { background:var(--red); }
      .msg { margin-top:18px; padding:15px; border-radius:12px; font-size:1rem; }
      .ok { background:#1e4620; color:#90ee90; border:1px solid #90ee90; }
      .err { background:#4a1a1a; color:#ff9f9f; border:1px solid #ff9f9f; }
    </style>
  </head>
  <body>
    <header>Kørselsrapport</header>
    <main>
      <div class="field"><label>Tur nr.</label><input id="turNr" type="text" placeholder="Fx 101" style="font-weight:bold;"></div>
      <div class="field"><label>By</label><input id="by" type="text" placeholder="Fx Roskilde"></div>
      <div class="field"><label>Dato</label><input id="C" type="date"></div>
      <div class="field"><label>Kilometer</label><input id="G" type="number" placeholder="Fx 42"></div>
      <div class="field"><label>Ankomst</label><input id="D" type="time"></div>
      <div class="field"><label>Afgang</label><input id="E" type="time"></div>
      <div class="field"><label>Timer</label><input id="F" type="text" placeholder="Fx 2,5 eller 02:30"></div>
      <div class="field"><label>Arbejdets art</label><input id="H" type="text" placeholder="Fx Udlevering / Haste"></div>
      <button id="btn">Gem</button>
      <button id="finishBtn">Afslut</button>
      <button id="resetBtn">Nulstil</button>
      <div id="msg"></div>
    </main>

    <script>
const endpoint = "https://script.google.com/macros/s/AKfycbzolWV8VpE5LfXOG4tKWnxGYr6f_4LCFc5hS0_pHrtTY0prmUjcb2RUQlUHNcThx3FE/exec";

async function send(action) {
  const payload = {
    A_turNr: document.getElementById("turNr").value,
    A_by:    document.getElementById("by").value,
    C:       document.getElementById("C").value,
    D:       document.getElementById("D").value,
    E:       document.getElementById("E").value,
    F:       document.getElementById("F").value,
    G:       document.getElementById("G").value,
    H:       document.getElementById("H").value,
    action
  };

  try {
    const res = await fetch(endpoint, {
      method: "POST",
      headers: { "Content-Type": "text/plain;charset=utf-8" }, // <- vigtigt!
      body: JSON.stringify(payload)
    });

    // læs svar
    const text = await res.text();
    let data;
    try { data = JSON.parse(text); } catch { data = { ok:false, message:text }; }

    alert(data.message || text);
    console.log("✅ Svar fra server:", data);

  } catch (err) {
    alert("❌ Netværksfejl: " + err.message);
    console.error(err);
  }
}

// Forbind knapper
document.getElementById("btn").onclick = () => send("gem");
document.getElementById("finishBtn").onclick = () => send("afslut");
document.getElementById("resetBtn").onclick = () => send("nulstil");
</script>
  </body>

</html>








